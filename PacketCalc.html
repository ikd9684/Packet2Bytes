<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS" />


<style>
* {
  font-family: "MS ゴシック";
  font-size: 0.96em;
}
input.CALC_TEXT {
  border: 1px dotted black;
  background-color: #ff8;
  text-align: right;
  font-size: 1.0em;
  width: 8em;
}
table.CALC_TABLE {
}
tr.CALC_TABLE {
}
td.CALC_TABLE {
  padding: 5px;
  vertical-align: bottom;
}
td.LABEL_BYTES {
  text-align: right;
}
</style>

<script type="text/javascript">
var YPP = 0.08;

function onLoad() {
  id('labelYpp').innerText = YPP;
  onBlurText();
}

function onFocusText() {
  id('packets').value = removeComma(id('packets').value);
  id('packets').select();
}
function onBlurText() {
  id('packets').value = addComma(id('packets').value);
  var v = removeComma(id('packets').value);
  var pkt = new Number(v);
  var bytes = pkt * 128;
  var kiro = Math.round(bytes / Math.pow(2, 10) * 100) / 100;
  var mega = Math.round(bytes / Math.pow(2, 20) * 100) / 100;
  var giga = Math.round(bytes / Math.pow(2, 30) * 100) / 100;
  var yen = Math.round(pkt * YPP);
  id('labelBytes').innerText = addComma(bytes.toString());
  id('labelKiro').innerText = addComma(kiro.toString());
  id('labelMega').innerText = addComma(mega.toString());
  id('labelGiga').innerText = addComma(giga.toString());
  id('labelYen').innerText = addComma(yen.toString());
}

function addComma(value) {
  var r = '';
  var v = removeComma(value);
  var len = v.length;
  for (i = len; 0 <= i; i--) {
    if ((len - i - 1) % 3 == 0 && i < len - 1 && v.charAt(i + 1) != '.') {
      r = v.charAt(i) + ',' + r;
    }
    else {
      r = v.charAt(i) + r;
    }
  }
  return r;
}
function removeComma(value) {
  return value.replace(new RegExp(',', 'g'), '');
}

function id(id) {
  return document.getElementById(id);
}

</script>
</head>

<body onload="onLoad();">

<table id="" class="CALC_TABLE">
  <tr class="CALC_TABLE">
    <td class="CALC_TABLE">
      バケット数<br/>
      <input type="text" class="CALC_TEXT" onfocus="onFocusText();" onblur="onBlurText();" id="packets" value="">
    </td>
    <td class="CALC_TABLE">pkt (1kt= 128 bytes)</td>
  </tr>
  <tr class="CALC_TABLE">
    <td class="CALC_TABLE LABEL_BYTES" id="labelBytes"></td>
    <td class="CALC_TABLE">Bytes</td>
  </tr>
  <tr class="CALC_TABLE">
    <td class="CALC_TABLE LABEL_BYTES" id="labelKiro"></td>
    <td class="CALC_TABLE">KB</td>
  </tr>
  <tr class="CALC_TABLE">
    <td class="CALC_TABLE LABEL_BYTES" id="labelMega"></td>
    <td class="CALC_TABLE">MB</td>
  </tr>
  <tr class="CALC_TABLE">
    <td class="CALC_TABLE LABEL_BYTES" id="labelGiga"></td>
    <td class="CALC_TABLE">GB</td>
  </tr>

  <tr class="CALC_TABLE">
    <td class="CALC_TABLE LABEL_BYTES" id="labelYen"></td>
    <td class="CALC_TABLE">YEN (1pkt = <span id="labelYpp"></span>yen)</td>
  </tr>
</table>

</body>
